---
import Layout from '../../layouts/Layout.astro';
import Cover from '../../components/projects/Cover.astro';


import { getAdjacentElements } from '../../utils/array.utils'

import { getCollection } from 'astro:content';
import { getEntries } from 'astro:content';

// Generate a new path for every project
export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map((entry, index) => ({
    params: { slug: entry.slug },
    props: {
      entry,
      prev: getAdjacentElements(projects, index)[0],
      next: getAdjacentElements(projects, index)[1]
    },
  }));
}

const { entry, prev, next } = Astro.props;
---

<Layout
  title="Project"
  description="Project Description"
>
  <Cover 
    title={entry.data.title} 
    overview={entry.data.overview} 
    type={entry.data.type}
    id={entry.data.id > 9 ? "" + entry.data.id : "0" + entry.data.id}
    cover={entry.data.cover} 
  />
</Layout>